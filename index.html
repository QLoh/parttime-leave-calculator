<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>部分工時假期計算器</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    label { display: block; margin-top: 10px; }
    input, select { margin: 5px 0; }
    .result { margin-top: 20px; padding: 10px; border: 1px solid #aaa; }
  </style>
</head>
<body>
  <h2>部分工時假期計算器</h2>
  <form id="calcForm">
    <label>年資（月數）：<input type="number" id="monthsWorked" value="12"></label>
    <label>每月平均實際工時（不含加班）：<input type="number" id="monthlyHours"></label>
    <label>時薪（元）：<input type="number" id="hourlyWage"></label>
    <label>到職是否滿 6 個月？<input type="checkbox" id="overSixMonths" checked></label>
    <label>產假類型：
      <select id="maternityType">
        <option value="56">正常分娩（56天）</option>
        <option value="28">流產 3 個月以上（28天）</option>
        <option value="7">流產 2~3 個月（7天）</option>
        <option value="5">流產未滿 2 個月（5天）</option>
      </select>
    </label>
    <button type="button" onclick="calculate()">計算</button>
  </form>

  <div class="result" id="output"></div>

  <script>
    function calculateVacationDays(monthsWorked) {
      if (monthsWorked < 6) return 0;
      if (monthsWorked < 12) return 3;
      if (monthsWorked < 24) return 7;
      if (monthsWorked < 36) return 10;
      if (monthsWorked < 60) return 14;
      if (monthsWorked < 120) return 15;
      let extra = Math.floor((monthsWorked - 120) / 12) + 16;
      return Math.min(extra, 30);
    }

    function calculate() {
      const monthsWorked = parseInt(document.getElementById("monthsWorked").value);
      const monthlyHours = parseFloat(document.getElementById("monthlyHours").value);
      const hourlyWage = parseFloat(document.getElementById("hourlyWage").value);
      const overSixMonths = document.getElementById("overSixMonths").checked;
      const maternityDays = parseInt(document.getElementById("maternityType").value);

      const fullYearHours = 2088;
      const yearHours = monthlyHours * 12;

      // 特休
      const vacationDays = calculateVacationDays(monthsWorked);
      const vacationHours = (yearHours / fullYearHours) * vacationDays * 8;
      const vacationPay = vacationHours * hourlyWage;

      // 產假 (週工時估算)
      const weeklyHours = monthlyHours / 4.33;
      const maternityWeeks = maternityDays / 7;
      const maternityHours = weeklyHours * maternityWeeks;
      let maternityPay = maternityHours * hourlyWage;
      if (!overSixMonths) maternityPay /= 2;

      // 顯示結果
      document.getElementById("output").innerHTML = `
        <h3>計算結果</h3>
        <p><b>特休假：</b>${vacationDays} 天 → ${vacationHours.toFixed(2)} 小時，約 NT$${vacationPay.toFixed(0)}</p>
        <p><b>產假：</b>${maternityDays} 天 → ${maternityHours.toFixed(2)} 小時，約 NT$${maternityPay.toFixed(0)}</p>
      `;
    }
  </script>
</body>
</html>
